#!/usr/bin/env node

'use strict'

var cluster = require('../cluster')
var cmd = require('commander')
var pkg = require('../package.json')

cmd
  .version(process.env.npm_package_version)
  .option('-p, --port <port>', 'HTTP server port', pkg.config.port)
  .option('-q, --quiet', 'disable console logging', pkg.config.quiet)
  .option('-r, --redis [dsn]', 'redis dsn', pkg.config.redis)
  .option('-w, --workers <count>', 'number of cluster workers', pkg.config.workers)
  .parse(process.argv)

cluster(cmd)
